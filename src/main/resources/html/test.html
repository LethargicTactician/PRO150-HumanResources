<!DOCTYPE html>
<script>

    class Employee{
        constructor(
            employeeFName,
            employeeLName,
            employeePosition,
            employeeEmail,
            employeeId,
            employeeAddress,
            employeeSalary,
            employeeStatus,
            employeeIsAdmin,
            employeeCreatedDate,
            employeeLastUpdatedDate,
            employeePwd
            ){
                this.employeeFName = employeeFName;
                this.employeeLName = employeeLName;
                this.employeePosition = employeePosition;
                this.employeeEmail = employeeEmail;
                this.employeeId = employeeId;
                this.employeeAddress = employeeAddress;
                this.employeeSalary = employeeSalary;
                this.employeeStatus = employeeStatus;
                this.employeeIsAdmin = employeeIsAdmin;
                this.employeeCreatedDate = employeeCreatedDate;
                this.employeeLastUpdatedDate = employeeLastUpdatedDate;
                this.employeePwd = employeePwd;
        }
    }


    function getAllEmployees(){
        fetch("http://localhost:6060/ERS/getAllEmployees",{
            method: "GET",
            mode: "no-cors",//get rid of cors error
            headers: {'Content-Type': 'application/json'}

            //for some reason it says there is a syntax error on line" }).then(response => response.json()) " when you run it, even with cors turned off, you can solve it by opening cmd and navigate to the chrome folder using
            //cd C:\Program Files (x86)\Google\Chrome\Application or wherever your chrome folder is and then run : chrome.exe --disable-web-security --user-data-dir="c:/ChromeDevSession", this will open new chrome without security. this chrome will not throw any cors issue.
            //the syntax issue will suddenly disappear running it this way without any code change, no idea why, might be a chrome issue, haven't test it on other browsers yet.

        }).then(response => response.json())
            .then(data => {
                console.log("raw data: ");
                console.log(data);
                //create a list of employee object to store the data
                let employeeList = [];
                //loop through the data and create employee objects
                for(let i = 0; i < data.length; i++){
                    let employee = new Employee(
                        data[i].employeeFName,
                        data[i].employeeLName,
                        data[i].employeePosition,
                        data[i].employeeEmail,
                        data[i].employeeId,
                        data[i].employeeAddress,
                        data[i].employeeSalary,
                        data[i].employeeStatus,
                        data[i].employeeIsAdmin,
                        data[i].employeeCreatedDate,
                        data[i].employeeLastUpdatedDate,
                        data[i].employeePwd
                    );
                    employeeList.push(employee);
                }
                console.log("employeeList: ");
                console.log(employeeList);
                //display the values in the h1 tag
                document.getElementById("testFname").innerHTML = employeeList[0].employeeFName;
                document.getElementById("testLname").innerHTML = employeeList[0].employeeLName;
                document.getElementById("testPos").innerHTML = employeeList[0].employeePosition;
                document.getElementById("testEmail").innerHTML = employeeList[0].employeeEmail;
                document.getElementById("testID").innerHTML = employeeList[0].employeeId;
                document.getElementById("testAdd").innerHTML = employeeList[0].employeeAddress;
                document.getElementById("testSal").innerHTML = employeeList[0].employeeSalary;
                document.getElementById("testStatus").innerHTML = employeeList[0].employeeStatus;
                document.getElementById("testAdmin").innerHTML = employeeList[0].employeeIsAdmin;
                document.getElementById("testCreatedDate").innerHTML = employeeList[0].employeeCreatedDate;
                document.getElementById("testLastUpdate").innerHTML = employeeList[0].employeeLastUpdatedDate;
                document.getElementById("testPwd").innerHTML = employeeList[0].employeePwd;


            })
            .catch(error => console.log(error));
    }


</script>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Page</title>
</head>

<body onload="getAllEmployees()">
<h1 id = "testFname">Fname</h1>
<h1 id = "testLname">Lname</h1>
<h1 id = "testPos">Pos</h1>
<h1 id = "testEmail">Email</h1>
<h1 id = "testID">id</h1>
<h1 id = "testAdd">Address</h1>
<h1 id = "testSal">Sal</h1>
<h1 id = "testStatus">Status</h1>
<h1 id = "testAdmin">Admin</h1>
<h1 id = "testCreatedDate">Created Date</h1>
<h1 id = "testLastUpdate">Last Update</h1>
<h1 id = "testPwd">Pwd</h1>

</div>

</body>
</html>